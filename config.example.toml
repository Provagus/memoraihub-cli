# meh Configuration Example
# Copy to ~/.meh/config.toml or .meh/config.toml in your project

# =============================================================================
# USER SETTINGS
# =============================================================================
[user]
name = "AI"           # Author name for facts
agent_id = ""         # Optional: unique agent identifier

# =============================================================================
# CORE SETTINGS
# =============================================================================
[core]
default_source = "local"
gc_retention_days = 30   # How long to keep deprecated/superseded facts
gc_auto = true           # Auto-run GC on MCP server start

# =============================================================================
# SEARCH SETTINGS
# =============================================================================
[search]
default_limit = 20       # Max results per search
token_budget = 3000      # Max tokens to return
federated_timeout_secs = 5  # Timeout for remote KB queries

# =============================================================================
# TRUST SETTINGS
# =============================================================================
[trust]
default_score = 0.5      # Initial trust for new facts
decay_rate = 0.01        # Trust decay over time

# =============================================================================
# SERVERS (define remote servers with their credentials)
# =============================================================================
# Each server entry has: name, url, api_key, timeout_secs
# The api_key is stored directly here (not in env var) for simplicity.

# [[servers]]
# name = "company"
# url = "https://kb.company.com"
# api_key = "meh_xxx_your_api_key_here"
# timeout_secs = 30

# [[servers]]
# name = "memoraihub"
# url = "https://memoraihub.com"
# api_key = "meh_xxx_public_key"
# timeout_secs = 30

# =============================================================================
# KNOWLEDGE BASES
# =============================================================================
[kbs]
primary = "local"                    # Default KB when --kb not specified
search_order = ["local"]             # Order for federated search

# --- Local SQLite KB (default) ---
[[kbs.kb]]
name = "local"
kb_type = "sqlite"
# path is auto-detected: .meh/data.db or MEH_DATABASE env var
write = "allow"    # "allow" | "deny" | "ask"
                   # allow = AI can write freely
                   # deny  = AI cannot write (read-only)
                   # ask   = AI writes go to pending_review, user must approve

# --- Example: Local KB with review requirement ---
# [[kbs.kb]]
# name = "reviewed"
# kb_type = "sqlite"
# path = ".meh/reviewed.db"
# write = "ask"

# --- Example: Remote company KB ---
# For remote KBs, specify which server to use (from [[servers]]) and the KB slug
#
# [[kbs.kb]]
# name = "company"
# kb_type = "remote"
# server = "company"           # References [[servers]] entry by name
# slug = "my-team-kb"          # The KB slug on that server
# write = "allow"

# --- Example: Public read-only KB ---
# [[kbs.kb]]
# name = "public"
# kb_type = "remote"
# server = "memoraihub"
# slug = "public-knowledge"
# write = "deny"
