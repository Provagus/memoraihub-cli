# Copilot Instructions

> Instructions for AI agents working in this workspace.

## üß† Knowledge Base (meh)

This project uses **meh** as a knowledge base for AI. You have access to MCP tools.

### ‚ö†Ô∏è Tool Names

MCP tools have `mcp_meh_` prefix:
- ‚ùå `meh_facts` (conceptual name)
- ‚úÖ `mcp_meh_meh_facts` (actual tool name)

### üåê KB Configuration

**This project uses a knowledge base.** The default KB is configured in `.meh/config.toml`.

| Setting | Value |
|---------|-------|
| KB Name | `{KB_NAME}` |

### Session Workflow

#### 1. START - at the beginning of session
```
# Check current KB (should auto-connect to default from config)
mcp_meh_meh_context({"action": "show"})

# If you need to switch to a different KB:
mcp_meh_meh_context({"action": "switch_kb", "kb_name": "{KB_NAME}"})

# Then check notifications and browse
mcp_meh_meh_notify({"action": "get"})           # check what changed
mcp_meh_meh_facts({"action": "browse", "path": "@", "mode": "tree"})  # see structure
mcp_meh_meh_facts({"action": "get", "id_or_path": "@readme"})  # read onboarding
```

#### 2. WORK - during task
```
mcp_meh_meh_facts({"action": "search", "query": "topic"})  # BEFORE answering
mcp_meh_meh_write({"action": "add", "path": "@path/to/fact", "content": "..."})  # document discoveries
mcp_meh_meh_write({"action": "bulk_vote", "votes": [{"fact_id":"meh-01XXX","vote":"+1","reason":"Agree"}]})  # vote on proposals
```

#### 3. END - after finishing
```
mcp_meh_meh_write({"action": "add", "path": "@.../bugs/...", "content": "..."})  # DOCUMENT BUGS FIXED
mcp_meh_meh_write({"action": "add", "path": "@.../changelog/...", "content": "..."})  # DOCUMENT CHANGES
mcp_meh_meh_notify({"action": "ack", "notification_ids": ["*"]})  # acknowledge notifications
```

**‚ö†Ô∏è CRITICAL: Always document your work!**
- Fixed a bug? ‚Üí document it
- Made changes? ‚Üí document them
- Found something important? ‚Üí document it
- **DO NOT SKIP THIS STEP** - future sessions need this context!

### Available Tools (4 merged tools)

| Tool | Actions | When to use |
|------|---------|-------------|
| `mcp_meh_meh_facts` | search, get, browse, federated_search | Read facts from knowledge base |
| `mcp_meh_meh_write` | add, correct, extend, deprecate, bulk_vote | Write/modify facts |
| `mcp_meh_meh_notify` | get, ack, subscribe | Manage notifications |
| `mcp_meh_meh_context` | list_kbs, switch_kb, switch_context, show | Manage KB context and session |

### Path Conventions

Paths are flexible - organize them as makes sense for your project. Common patterns:

```
# By type (flat)
@docs/           - documentation
@bugs/           - found bugs
@todo/           - tasks to do
@decisions/      - architectural decisions

# By project/component (hierarchical)
@project-name/bugs/...
@project-name/docs/...
@component/feature/...

# Examples
@backend/api/auth-flow
@frontend/bugs/login-issue
@infra/decisions/use-postgres
```

**üí° TIP:** Browse existing structure first with `mcp_meh_meh_facts({"action": "browse", "path": "@", "mode": "tree"})` and follow the existing conventions.

### What to Document?

‚úÖ **ALWAYS DOCUMENT:**
- Bugs found and fixed
- Code changes and refactoring
- Architectural decisions
- Security improvements
- New features
- Important discoveries
- TODOs for future

‚ùå **DO NOT DOCUMENT:**
- Code itself (it's in git)
- Obvious things from code
- Temporary notes (use comments in code instead)

### üö® MANDATORY DOCUMENTATION CHECKLIST

After EVERY task that modifies code, YOU MUST:

1. ‚úÖ Document bugs fixed
2. ‚úÖ Document changes made
3. ‚úÖ Update related facts if needed: `mcp_meh_meh_write({"action": "extend", "fact_id": "...", ...})`

**If you don't document, future AI sessions won't know what you did!**

### Example Workflow

```
1. User: "How does search work?"
2. AI: mcp_meh_meh_facts({"action": "search", "query": "search implementation"})
3. AI: [reads results, answers with context]
4. AI: mcp_meh_meh_write({"action": "add", "path": "@docs/search-explained", "content": "..."})
```

### Switching KBs

To switch between configured KBs:

```
mcp_meh_meh_context({"action": "list_kbs"})  # Show all available KBs
mcp_meh_meh_context({"action": "switch_kb", "kb_name": "kb-name"})  # Switch to different KB
mcp_meh_meh_context({"action": "show"})  # Show current context
```

**Note:** KBs are configured in `.meh/config.toml`. The default KB is set in `[kbs] primary = "..."`.

## üìÅ Project Structure

<!-- Fill in for your project -->

- `src/` - source code
- `docs/` - documentation
- `.meh/` - local knowledge base
